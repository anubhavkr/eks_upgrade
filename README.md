This script upgrades an Amazon EKS cluster's node group to the specified Kubernetes version. It also performs some validation before and after the upgrade. The script first lists all available EKS clusters in your account and prompts you to choose the cluster you want to upgrade. Next, the script lists all the node groups in the selected cluster and prompts you to choose the node group you want to upgrade. After that, the script fetches some details about the node group such as its current release version, the name of its associated auto-scaling group, and the IDs of the instances running in the group.

The script then prompts you to provide the desired Kubernetes version to which you want to upgrade the node group. Once you provide the version, the script upgrades the node group to the specified version using the aws eks update-nodegroup-version command. The script then continuously checks the status of the node group until it becomes active. After the upgrade is complete, the script performs some post-upgrade validation. It checks the status of each node in the node group to ensure that it is in the ready state. If a node is not in the ready state, the script waits for two minutes and checks the node's status again up to five times. Finally, the script displays the status of each node in the node group and some other details such as the EKS cluster version and the release version of the node group.

It is important to note that the upgrade process involves replacing the old nodes with new ones that are running the desired Kubernetes version. During this process, your application's workloads will be temporarily unavailable or may experience disruptions. Therefore, it is advisable to perform this upgrade during non-business hours and to test the upgrade in a non-production environment before performing it in a production environment
